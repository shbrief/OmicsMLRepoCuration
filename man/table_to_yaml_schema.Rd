% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/loadSchema.R
\name{table_to_yaml_schema}
\alias{table_to_yaml_schema}
\title{Convert schema table to YAML format}
\usage{
table_to_yaml_schema(schema_table, output_file = NULL)
}
\arguments{
\item{schema_table}{A data frame containing schema definitions with columns
matching the data dictionary format: col.name, col.class, uniqueness,
requiredness, multiplevalues, description, allowedvalues, ontology.}

\item{output_file}{Character string specifying the path to the output YAML file.
If \code{NULL} (default), the schema is returned as a list without writing
to disk.}
}
\value{
A list containing the schema in YAML-compatible format, with field
  definitions including validation rules and ontology mappings. When output_file
  is specified, the list is also written to the YAML file.
}
\description{
Converts a data dictionary table (data frame) into a YAML schema format.
This is useful for creating or updating YAML schema files from CSV data
dictionaries or for round-trip conversions between formats.
}
\details{
The function processes the following:
\itemize{
  \item Converts requiredness to boolean required field
  \item Parses allowedvalues as either regex patterns or pipe-separated lists
  \item Splits ontology IDs by pipe character
  \item Creates proper YAML structure with validation and ontology sections
}
}
\examples{
# Create sample data dictionary
dict_df <- data.frame(
  col.name = c("sample_id", "age"),
  col.class = c("character", "numeric"),
  uniqueness = c("unique", "non-unique"),
  requiredness = c("required", "optional"),
  multiplevalues = c(FALSE, FALSE),
  description = c("Sample identifier", "Age in years"),
  allowedvalues = c(NA, "^[0-9]+$"),
  ontology = c(NA, NA),
  stringsAsFactors = FALSE
)

# Convert to YAML format
yaml_schema <- table_to_yaml_schema(dict_df)
str(yaml_schema)

# Write to file
# temp_yaml <- tempfile(fileext = ".yaml")
# yaml_schema <- table_to_yaml_schema(dict_df, temp_yaml)

}
